def generate_main_dashboard(self):
    """
    Generate main HTML dashboard - PERFECT VERSION
    """
    logger.info("Generating main dashboard")
    
    # Calculate statistics
    stats = self._calculate_dashboard_stats()
    
    # Get recent alerts
    recent_alerts = self.alerts[-10:]  # Last 10 alerts
    
    # Get live games
    live_games = [p for p in self.predictions if p.get('status') in ['live', 'LIVE', 'IN_PLAY']]
    
    # Generate charts
    self._generate_confidence_chart()
    self._generate_league_distribution_chart()
    
    # Add favicon
    favicon_url = "data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>⚽</text></svg>"
    
    # Create HTML - PERFECT VERSION
    html_content = f'''<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>⚽ Over/Under Predictor - Live Dashboard</title>
    <link rel="icon" href="{favicon_url}">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.9.1/dist/chart.min.js"></script>
    <meta http-equiv="refresh" content="300">
    <style>
        /* Critical inline styles to prevent FOUC */
        .fouc-protection {{ opacity: 0; }}
        .fouc-protection.loaded {{ opacity: 1; transition: opacity 0.3s ease-in; }}
    </style>
</head>
<body class="fouc-protection">
    <div class="container">
        <!-- Header -->
        <header class="dashboard-header">
            <div class="header-content">
                <h1><i class="fas fa-futbol"></i> Over/Under Predictor </h1>
                <p class="subtitle">AI-powered over/under prediction system</p>
                <div class="header-stats">
                    <div class="stat-badge">
                        <i class="fas fa-clock"></i>
                        <span>Last updated: {datetime.now().strftime('%Y-%m-%d %H:%M:%S')}</span>
                    </div>
                    <div class="stat-badge">
                        <i class="fas fa-sync-alt"></i>
                        <span>Updates every {self.config['system']['update_interval'] // 60} minutes</span>
                    </div>
                </div>
            </div>
        </header>

        <!-- Stats Grid -->
        <div class="stats-grid">
            <div class="stat-card card-primary">
                <div class="stat-icon">
                    <i class="fas fa-chart-line"></i>
                </div>
                <div class="stat-content">
                    <h3>Live Games</h3>
                    <p class="stat-number">{stats['live_games']}</p>
                    <p class="stat-trend">
                        <i class="fas fa-arrow-up"></i> {stats['games_trend']}% from last hour
                    </p>
                </div>
            </div>
            
            <div class="stat-card card-success">
                <div class="stat-icon">
                    <i class="fas fa-bell"></i>
                </div>
                <div class="stat-content">
                    <h3>Active Alerts</h3>
                    <p class="stat-number">{stats['active_alerts']}</p>
                    <p class="stat-trend">
                        <i class="fas fa-bolt"></i> {stats['alerts_today']} today
                    </p>
                </div>
            </div>
            
            <div class="stat-card card-warning">
                <div class="stat-icon">
                    <i class="fas fa-crosshairs"></i>
                </div>
                <div class="stat-content">
                    <h3>Avg. Confidence</h3>
                    <p class="stat-number">{stats['avg_confidence']:.1f}%</p>
                    <p class="stat-trend">
                        <i class="fas fa-chart-bar"></i> High: {stats['high_confidence_pct']:.1f}%
                    </p>
                </div>
            </div>
            
            <div class="stat-card card-info">
                <div class="stat-icon">
                    <i class="fas fa-trophy"></i>
                </div>
                <div class="stat-content">
                    <h3>Top League</h3>
                    <p class="stat-number">{stats['top_league'][:12]}{'...' if len(stats['top_league']) > 12 else ''}</p>
                    <p class="stat-trend">
                        <i class="fas fa-star"></i> {stats['top_league_games']} games
                    </p>
                </div>
            </div>
        </div>

        <!-- Alerts Section -->
        <section class="section">
            <div class="section-header">
                <h2><i class="fas fa-exclamation-triangle"></i> Recent Alerts</h2>
                <a href="alerts.html" class="btn-view-all">
                    <i class="fas fa-arrow-right"></i> View All
                </a>
            </div>
            
            <div class="alerts-container">
                {"".join([self._format_alert_card(alert) for alert in recent_alerts]) if recent_alerts else 
                '<div class="empty-state"><i class="fas fa-bell-slash"></i><p>No active alerts at the moment</p></div>'}
            </div>
        </section>

        <!-- Live Games -->
        <section class="section">
            <div class="section-header">
                <h2><i class="fas fa-play-circle"></i> Live Games Analysis</h2>
                <span class="badge-live">
                    <i class="fas fa-circle"></i> {len(live_games)} Live
                </span>
            </div>
            
            <div class="games-grid">
                {"".join([self._format_game_card(game) for game in live_games[:6]]) if live_games else 
                '<div class="empty-state"><i class="fas fa-clock"></i><p>No live games being analyzed</p></div>'}
            </div>
        </section>

        <!-- Charts Section -->
        <div class="charts-grid">
            <div class="chart-card">
                <div class="chart-header">
                    <h3><i class="fas fa-chart-pie"></i> Prediction Confidence</h3>
                </div>
                <div class="chart-container">
                    <canvas id="confidenceChart"></canvas>
                </div>
            </div>
            
            <div class="chart-card">
                <div class="chart-header">
                    <h3><i class="fas fa-globe-europe"></i> League Distribution</h3>
                </div>
                <div class="chart-container">
                    <canvas id="leagueChart"></canvas>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <footer class="dashboard-footer">
            <div class="footer-content">
                <div class="footer-info">
                    <p><i class="fas fa-code"></i> Powered by AI Prediction System</p>
                    <p><i class="fas fa-sync-alt"></i> Auto-refresh in <span id="countdown">300</span> seconds</p>
                </div>
                <div class="footer-links">
                    <a href="statistics.html"><i class="fas fa-chart-bar"></i> Statistics</a>
                    <a href="alerts.html"><i class="fas fa-exclamation-triangle"></i> Alerts</a>
                    <a href="performance.html"><i class="fas fa-tachometer-alt"></i> Performance</a>
                    <a href="leagues.html"><i class="fas fa-trophy"></i> Leagues</a>
                </div>
            </div>
            <div class="footer-copyright">
                <p>© {datetime.now().year} {self.config['system']['name']}. All data is for informational purposes only.</p>
            </div>
        </footer>
    </div>

    <!-- JavaScript -->
    <script src="js/dashboard.js"></script>
    <script>
        // FOUC protection
        document.addEventListener('DOMContentLoaded', function() {{
            document.body.classList.add('loaded');
            
            // Load charts with error handling
            try {{
                loadConfidenceChart();
                loadLeagueChart();
                startCountdown();
            }} catch (error) {{
                console.error('Error loading charts:', error);
                // Create fallback charts
                createFallbackCharts();
            }}
        }});
        
        function createFallbackCharts() {{
            // Simple fallback for charts if Chart.js fails
            const confidenceCtx = document.getElementById('confidenceChart');
            const leagueCtx = document.getElementById('leagueChart');
            
            if (confidenceCtx) {{
                confidenceCtx.innerHTML = '<div class="empty-state"><i class="fas fa-chart-pie"></i><p>Chart loading...</p></div>';
            }}
            
            if (leagueCtx) {{
                leagueCtx.innerHTML = '<div class="empty-state"><i class="fas fa-globe-europe"></i><p>Chart loading...</p></div>';
            }}
        }}
    </script>
</body>
</html>'''
    
    # Save main dashboard
    dashboard_path = self.reports_dir / "index.html"
    with open(dashboard_path, 'w', encoding='utf-8') as f:
        f.write(html_content)
    
    logger.info(f"✅ Main dashboard saved to: {dashboard_path}")
    
    # Also save data for charts
    self._save_chart_data()
